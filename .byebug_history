c
customer = Stripe::Customer.create({name:current_user.name,email:current_user.email,description:"customer id: #{current_user.id}",source: params[:stripeToken]})
customer
params
c
      :source => source
      description: "Customer id: #{current_user.id}",
      email: current_user.email,
      name: current_user.name,
customer = Stripe::Customer.create(
customer
c
n
amount = @booking.tour.amount * @booking.no_of_travellers
 card_detail = params[:stripeTokenType]
source = params[:stripeToken]
source
params
customer
c
@payment
params
c
@payment
params
c
@booking = @traveller.bookings.new(set_params)
params
@traveller
n
@booking = @traveller.bookings.new(set_params)
params
c
params
c
traveller_name 
tour_id
@tour
c
params
@traveller
@tour
tour_id
c
@booking
@traveller
c
@tour
tour
c
@tour
tour_id
c
charge
source = params[:stripeToken]
params
c
   19:       :description => 'Description of booking',
   18:       :amount => @booking.tour.amount * @booking.no_of_travellers,
   17:       :traveller => traveller_id,
   16:       :booking => booking_id,
 charge = Stripe::Charge.create({
Stripe::Charge
source = params[:source]
source
params
c
params[:source]
params
c
charge
@charge
n
params[:source]
params
c
charge = Stripe::Charge.create(amount: amount, currency: 'inr', source: traveller.stripe_token)
c
   19:         description: 'Charge for booking'
   18:         source: traveller.stripe_token,
   17:         currency: 'inr',
   16:         amount: amount,
charge = Stripe::Charge.create(
n
amount: amount,
Stripe::Charge
charge
traveller = @traveller
amount =  calculate_booking_amount(params[:total_amount])
c
@amount = @booking.tour.amount
 @booking = @traveller.bookings.find(params[:id])
@traveller = Traveller.find(current_user.id)
c
a = @booking.save!
a = @booking.save
n
@booking = @traveller.bookings.new(set_params.merge(tour_id:@tour.id))
params
c
@booking = @traveller.bookings.new(set_params.merge(tour_id:@tour.id))
c
traveller_booking_path(id:@booking.id)
a = @booking.save
@booking = @traveller.bookings.new(set_params.merge(tour_id:@tour.id))
c
tours
c
@tours
c
traveller_booking_path(id:@booking.id)
traveller_booking_path
  validates :total_amount_in_cents, numericality: { greater_than_or_equal_to: 0 }
  validates :number_of_participants, numericality: { greater_than: 0 }
@booking
c
@booking = @traveller.bookings.new(set_params.merge(tour_id:@tour.id))
@tour = Tour.find_by(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
@tour = Tour.find(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
@booking = @traveller.bookings.new(tour_id:@tour.id)
@tour = Tour.find(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
@booking = @traveller.bookings.new(set_params.merge(tour_id:@tour.id))
@tour = Tour.find_by(params[:tour_id])
n
c
@traveller.bookings.build(tour_id:@tour.id)
tour_id:@tour.id
c
@tour = Tour.find(params[:tour_id])
n
@traveller = Traveller.find(current_user.id)
c
params
@tour = Tour.find(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
@tour.id
@tour
:tour_id
c
@tour.id
@tour
tour_id
@traveller.bookings.count
@traveller.bookings
@traveller
c
@tour = Tour.find(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
n
@booking = @traveller.bookings.new(tour_id:@tour.id)
@tour = Tour.find(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
@tour = Tour.find(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
n
@booking = @traveller.bookings.new(tour_id:@tour.id)
@tour = Tour.find(params[:tour_id])
@traveller = Traveller.find(current_user.id)
c
@booking = @traveller.bookings.new
@booking.tour_id = params[:tour_id]
@booking = @traveller.bookings.new(set_params)
@booking = @traveller.bookings.new(set_params
@traveller = Traveller.find(current_user.id)
params
c
@booking.save
@booking = @traveller.bookings.new(set_params)
@traveller = Traveller.find(current_user.id)
c
params
c
@booking.save!
@booking.save
@booking = Booking.new(set_params)
params
c
@booking.save!
@booking = Booking.new(set_params)
params
c
@booking.save!
@booking.save
 @booking = Booking.new(set_params)
params
c
params
c
@booking = Booking.new(set_params)
params
c
n
@booking.save
a= @booking.save
 params
c
@booking
@booking = Booking.new(set_params)
c
@booking.tour_id = params[:tour_id]
@booking = Booking.new
c
@booking = Booking.new(tour_id: @tour,traveller_id: @traveller)
 @traveller = Traveller.find(current_user.id)
 @tour = Tour.find_by(params[:tour_id])
c
@traveller = Traveller.find(:traveller_id)
 @tour = Tour.find_by(params[:tour_id])
c
n
Tour
Tour.connection
Tour
params
c
 @organizer = Organizer.find(params[:id])
c
@organizer = Organizer.find(params[:id])
c
n
Organizer.all
Organizer
Organizer.connection
Organizer
c
@collaborate = @tour.collaborates.new(set_params.merge(hotel_id:@hotel.id))
n
c
@collaborate = @tour.collaborates.new(set_params.merge(hotel_id:@hotel.id))
 @hotel = Hotel.find(params[:hotel_id])
 @tour = @organizer.tours.find(params[:tour_id])
=> 19:     @tour = @organizer.tours.find(params[:tour_id])
c
 @collaborate = @tour.collaborates.new(set_params.merge(hotel_id:@hotel.id))
@hotel = Hotel.find(params[:hotel_id])
@tour = @organizer.tours.find(params[:tour_id])
c
a = @collaborate.save!
a = @collaborate.save
@collaborate = @tour.collaborates.new(set_params.merge(hotel_id:@hotel.id))
@hotel = Hotel.find(params[:hotel_id])
@tour = @organizer.tours.find(params[:tour_id])
c
a = @hotel.save!
a = @hotel.save
@collaborate = @tour.collaborates.new(set_params.merge(hotel_id:@hotel.id))
